# KB HUG AI - ì§ì› íë§ AI ì±—ë´‡

## í”„ë¡œì íŠ¸ ê°œìš”

KB HUG AIëŠ” ì§ì›ë“¤ì˜ ìŠ¤íŠ¸ë ˆìŠ¤ì™€ ê³ ë¯¼ì„ í•´ì†Œí•˜ê¸° ìœ„í•œ AI ìƒë‹´ ì±—ë´‡ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ì— ë”°ë¼ ë§ì¶¤í˜• AI ìºë¦­í„°ì™€ ëŒ€í™”í•˜ë©°, ëŒ€í™” ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ì²œí•´ì£¼ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

**êµ¬í˜„ ë²”ìœ„**: í”„ë¡ íŠ¸ì—”ë“œ UI/UX ë° AI ì„œë¹„ìŠ¤ ëª¨ë“ˆ (ë°±ì—”ë“œëŠ” Spring Boot + MySQLë¡œ ë³„ë„ êµ¬í˜„)

### ì£¼ìš” ê¸°ëŠ¥

1. **ì¹´í…Œê³ ë¦¬ë³„ AI ìºë¦­í„° ì„ íƒ**
   - **ë¡¤ë¡œë¼ë¬´**: ê³ ê° ê´€ë ¨ ìŠ¤íŠ¸ë ˆìŠ¤ ì „ë¬¸
   - **ì‹¬ì¿µë¹„ë¹„**: ì¡°ì§/ì—…ë¬´ ê´€ë ¨ ìŠ¤íŠ¸ë ˆìŠ¤ ì „ë¬¸  
   - **ë©œë‘ì½œë¦¬**: ê°œì¸/ë²ˆì•„ì›ƒ ì „ë¬¸

2. **ìì—°ìŠ¤ëŸ¬ìš´ AI ëŒ€í™”**
   - ChatGPT API ê¸°ë°˜ ì‹¬ë¦¬ ìƒë‹´ ê¸°ë²• ì ìš©
   - ê°ì •ì— ë§ì¶˜ ìœ„ë¡œì™€ ê²©ë ¤ ë©”ì‹œì§€
   - ëŒ€í™” ë‚´ìš© ê¸°ë°˜ í‚¤ì›Œë“œ ì¶”ì¶œ

3. **ë§ì¶¤í˜• ë¦¬ì†ŒìŠ¤ ì¶”ì²œ**
   - ëŒ€í™” ë‚´ìš© ë¶„ì„ì„ í†µí•œ í‚¤ì›Œë“œ ì¶”ì¶œ
   - ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì‹¤ì‹œê°„ í¬ë¡¤ë§
   - ê´€ë ¨ ìƒë‹´, ë¸”ë¡œê·¸, ì„œì  ì¶”ì²œ

4. **ëŒ€í™” ê¸°ë¡ ê´€ë¦¬**
   - ì‚¬ìš©ìë³„ ëŒ€í™” íˆìŠ¤í† ë¦¬ ì €ì¥
   - ì¹´í…Œê³ ë¦¬ë³„ í†µê³„ ë¶„ì„
   - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì§€ì›

## ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. AI ì„œë¹„ìŠ¤ ëª¨ë“ˆ ì˜ì¡´ì„± ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

### 2. í™˜ê²½ ì„¤ì •
`.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  OpenAI API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:
```
OPENAI_API_KEY=your_openai_api_key_here
```

### 3. Spring Boot ë°±ì—”ë“œ ì—°ë™
- AI ì„œë¹„ìŠ¤ ëª¨ë“ˆì„ Spring Boot í”„ë¡œì íŠ¸ì— í†µí•©
- `CounselingChatbot` í´ë˜ìŠ¤ë¥¼ Spring Beanìœ¼ë¡œ ë“±ë¡
- RESTful API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ AI ì„œë¹„ìŠ¤ í˜¸ì¶œ
- MySQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™

### 4. í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì™„ë£Œ
- HTML/CSS/JavaScript ê¸°ë°˜ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ì™„ë£Œ
- ë°°í¬ í™˜ê²½ êµ¬ì„± í›„ ì›¹ ì„œë¹„ìŠ¤ ì œê³µ ì˜ˆì •
- MySQL ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ë™í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„° ê´€ë¦¬ (ë°±ì—”ë“œ)

## ê¸°ìˆ  ìŠ¤íƒ ë° ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ë¥˜ | ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|------|
| **Backend** | Spring Boot | - | RESTful API ì„œë²„ (ì™¸ë¶€ êµ¬í˜„) |
| **Database** | MySQL | - | ë°ì´í„° ì €ì¥ ë° ê´€ë¦¬ |
| **AI/ML** | OpenAI GPT-3.5 Turbo | - | ìì—°ì–´ ì²˜ë¦¬ ë° ëŒ€í™” ìƒì„± |
| **Web Scraping** | BeautifulSoup4 | - | ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ë¡¤ë§ |
| **HTTP Client** | Requests | 2.31.0 | ì™¸ë¶€ API í˜¸ì¶œ |
| **Environment** | python-dotenv | 1.0.0 | í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ |
| **Frontend** | HTML5/CSS3/JavaScript | - | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ |
| **Storage** | localStorage | - | í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìƒíƒœ ê´€ë¦¬ |

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Backend       â”‚    â”‚   External      â”‚
â”‚   (Browser)     â”‚    â”‚   (Spring Boot) â”‚    â”‚   Services      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ HTML5/CSS3    â”‚â—„â”€â”€â–ºâ”‚ â€¢ Spring Server â”‚â—„â”€â”€â–ºâ”‚ â€¢ OpenAI API    â”‚
â”‚ â€¢ JavaScript    â”‚    â”‚ â€¢ RESTful API   â”‚    â”‚ â€¢ GPT-3.5 Turbo â”‚
â”‚ â€¢ localStorage  â”‚    â”‚ â€¢ Business Logicâ”‚    â”‚                 â”‚
â”‚ â€¢ Real-time UI  â”‚    â”‚ â€¢ MySQL DB      â”‚    â”‚ â€¢ Naver Search  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”§ í•µì‹¬ ëª¨ë“ˆ êµ¬ì¡°

#### 1. **CounselingChatbot** (`app/chatbot.py`)
```python
class CounselingChatbot:
    â”œâ”€â”€ __init__(api_key)           # OpenAI í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
    â”œâ”€â”€ process_message()           # ë©”ì¸ ëŒ€í™” ì²˜ë¦¬ ë¡œì§
    â”œâ”€â”€ recommend_resources()       # ë¦¬ì†ŒìŠ¤ ì¶”ì²œ ì—”ì§„
    â”œâ”€â”€ _search_naver_blog()        # ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ë¡¤ë§
    â”œâ”€â”€ _extract_keywords()         # GPT ê¸°ë°˜ í‚¤ì›Œë“œ ì¶”ì¶œ
    â””â”€â”€ _generate_smart_response()  # í´ë°± ì‘ë‹µ ìƒì„±
```

#### 2. **AI ì„œë¹„ìŠ¤ ëª¨ë“ˆ** (`app/chatbot.py`)
```python
AI Service Module:
    â”œâ”€â”€ CounselingChatbot           # AI ì±—ë´‡ í•µì‹¬ ë¡œì§
    â”œâ”€â”€ process_message()           # ëŒ€í™” ì²˜ë¦¬ ë° GPT API ì—°ë™
    â”œâ”€â”€ recommend_resources()       # ë¦¬ì†ŒìŠ¤ ì¶”ì²œ ì—”ì§„
    â”œâ”€â”€ _search_naver_blog()        # ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ë¡¤ë§
    â””â”€â”€ _generate_smart_response()  # í´ë°± ì‘ë‹µ ìƒì„±
```

#### 3. **í”„ë¡ íŠ¸ì—”ë“œ ëª¨ë“ˆ** (`app/templates/`)
```
Frontend Templates:
    â”œâ”€â”€ home.html                   # ë©”ì¸ í™ˆ í™”ë©´
    â”œâ”€â”€ chat_topics.html            # ìºë¦­í„° ì„ íƒ í™”ë©´
    â”œâ”€â”€ chat_interface.html         # ì‹¤ì‹œê°„ ì±„íŒ… UI
    â”œâ”€â”€ resources.html              # ë¦¬ì†ŒìŠ¤ ì¶”ì²œ í™”ë©´
    â””â”€â”€ records.html                # ëŒ€í™” ê¸°ë¡ í™”ë©´

JavaScript Features:
    â”œâ”€â”€ Real-time Chat Interface    # ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥
    â”œâ”€â”€ Character Selection         # ìºë¦­í„° ì„ íƒ ë° ìƒíƒœ ê´€ë¦¬
    â”œâ”€â”€ Resource Recommendation     # ë¦¬ì†ŒìŠ¤ ì¶”ì²œ UI
    â”œâ”€â”€ Local Storage Management    # ì‚¬ìš©ì ìƒíƒœ ì €ì¥
    â””â”€â”€ Error Handling              # í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì˜¤ë¥˜ ì²˜ë¦¬
```

### ğŸ“Š ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨

```
1. ì‚¬ìš©ì ì¹´í…Œê³ ë¦¬ ì„ íƒ (ê³ ê°/ì—…ë¬´/ê°œì¸)
   â†“
2. AI ìºë¦­í„° í˜ë¥´ì†Œë‚˜ ì„¤ì • (í”Œë¡œë¼ë¬´/ì‹¬ì¿µë¹„ë¹„/ë©œë‘ì½œë¦¬)
   â†“
3. ChatGPT API í˜¸ì¶œ (GPT-3.5 Turbo)
   â”œâ”€â”€ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ êµ¬ì„±
   â”œâ”€â”€ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬
   â””â”€â”€ ìì—°ìŠ¤ëŸ¬ìš´ ì‘ë‹µ ìƒì„±
   â†“
4. ëŒ€í™” ë‚´ìš© ë¶„ì„ ë° í‚¤ì›Œë“œ ì¶”ì¶œ
   â”œâ”€â”€ GPT ê¸°ë°˜ í‚¤ì›Œë“œ ì¶”ì¶œ
   â”œâ”€â”€ ì¹´í…Œê³ ë¦¬ë³„ ê²€ìƒ‰ ì¿¼ë¦¬ êµ¬ì„±
   â””â”€â”€ ê²€ìƒ‰ ìµœì í™”
   â†“
5. ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì‹¤ì‹œê°„ í¬ë¡¤ë§
   â”œâ”€â”€ BeautifulSoup4 HTML íŒŒì‹±
   â”œâ”€â”€ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ì •ë³´ ì¶”ì¶œ
   â””â”€â”€ ì¤‘ë³µ ì œê±° ë° ì •ë ¬
   â†“
6. ë§ì¶¤í˜• ë¦¬ì†ŒìŠ¤ ì¶”ì²œ ë° ì œê³µ
   â”œâ”€â”€ ê´€ë ¨ì„± ì ìˆ˜ ê³„ì‚°
   â”œâ”€â”€ ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§
   â””â”€â”€ ì‚¬ìš©ì ì¹œí™”ì  UI ì œê³µ
```

## ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤

### 1. í™ˆ í™”ë©´ (`/home`)
- **ê¸°ë¡ ë³´ê¸°** ë²„íŠ¼: ê³¼ê±° ëŒ€í™” ê¸°ë¡ í™•ì¸
- **ëŒ€í™” ì‹œì‘í•˜ê¸°** ë²„íŠ¼: ì¹´í…Œê³ ë¦¬ ì„ íƒ í™”ë©´ìœ¼ë¡œ ì´ë™

### 2. ì¹´í…Œê³ ë¦¬ ì„ íƒ í™”ë©´ (`/chat_topics`)
- 3ê°œ ì¹´í…Œê³ ë¦¬ë³„ KB ìºë¦­í„° í‘œì‹œ
- í´ë¦­ ì‹œ í•´ë‹¹ ìºë¦­í„°ì™€ ëŒ€í™” ì‹œì‘
- localStorageë¥¼ í†µí•œ ì„ íƒ ì •ë³´ ì €ì¥

### 3. AI ëŒ€í™” í™”ë©´ (`/chat_interface`)
- ì‹¤ì‹œê°„ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- ìë™ ë†’ì´ ì¡°ì ˆ í…ìŠ¤íŠ¸ ì…ë ¥
- íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°
- ì œì•ˆ ë²„íŠ¼ì„ í†µí•œ ë¹ ë¥¸ ëŒ€í™” ì‹œì‘

### 4. ë¦¬ì†ŒìŠ¤ ì¶”ì²œ í™”ë©´ (`/resources`)
- ëŒ€í™” ë‚´ìš© ê¸°ë°˜ ì¶”ì²œ ë¦¬ì†ŒìŠ¤ í‘œì‹œ
- ì‹¤ì œ ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë§í¬
- ë¸”ë¡œê·¸ëª…, ì‘ì„±ì¼, ë¯¸ë¦¬ë³´ê¸° ì œê³µ
- ì¸ë„¤ì¼ ì´ë¯¸ì§€ í‘œì‹œ

## ê¸°ìˆ ì  êµ¬í˜„

### 1. AI ì±—ë´‡ ì—”ì§„ (OpenAI GPT-3.5 Turbo)
```python
# app/chatbot.py - CounselingChatbot í´ë˜ìŠ¤
class CounselingChatbot:
    def __init__(self, api_key):
        self.client = openai.OpenAI(api_key=api_key)
        self.conversation_history = {}
        
        # ìºë¦­í„°ë³„ í˜ë¥´ì†Œë‚˜ ì •ì˜
        self.character_personas = {
            'í”Œë¡œë¼ë¬´': {
                'role': 'ê³ ê° ê´€ë ¨ ìŠ¤íŠ¸ë ˆìŠ¤ ì „ë¬¸ ìƒë‹´ì‚¬',
                'personality': 'ë¶€ë“œëŸ½ê³  ê³µê°ì ì¸ í†¤ìœ¼ë¡œ ê³ ê°ê³¼ì˜ ê°ˆë“± ìƒí™©ì„ í•´ì†Œí•´ì£¼ëŠ” ìƒë‹´ì‚¬',
                'specialty': 'ê³ ê° ë¯¼ì›, í­ì–¸, ê³¼ë„í•œ ìš”êµ¬ ë“± ì™¸ë¶€ ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©'
            },
            'ì‹¬ì¿µë¹„ë¹„': {
                'role': 'ì¡°ì§Â·ì—…ë¬´ ê´€ë ¨ ìŠ¤íŠ¸ë ˆìŠ¤ ì „ë¬¸ ìƒë‹´ì‚¬', 
                'personality': 'í¬ê·¼í•˜ê³  ë”°ëœ»í•œ ë§ˆìŒìœ¼ë¡œ ì§ì¥ ë‚´ ì¸ê°„ê´€ê³„ì™€ ì—…ë¬´ ì••ë°•ì„ ì¡°ìœ¨í•˜ëŠ” ìƒë‹´ì‚¬',
                'specialty': 'ìƒì‚¬Â·ë™ë£Œ ê°ˆë“±, ì—…ë¬´ ì••ë°•, ì¡°ì§ ë¬¸í™” ë“± ë‚´ë¶€ ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©'
            },
            'ë©œë‘ì½œë¦¬': {
                'role': 'ê°œì¸Â·ë²ˆì•„ì›ƒ ì „ë¬¸ ìƒë‹´ì‚¬',
                'personality': 'ì´ˆë¡ë¹› ìœ„ë¡œë¡œ ì§€ì¹œ ëª¸ê³¼ ë§ˆìŒì„ ì¹˜ìœ í•˜ëŠ” íë§ ìƒë‹´ì‚¬', 
                'specialty': 'í”¼ë¡œ, ë¬´ê¸°ë ¥, ê°œì¸ì  ë²ˆì•„ì›ƒ ë“± ë‚´ì  ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©'
            }
        }

    def process_message(self, user_id, message, character=None, category=None):
        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ êµ¬ì„±
        system_prompt = f"""ë‹¹ì‹ ì€ KB HUGì˜ {character_info['role']}ì…ë‹ˆë‹¤.
        íŠ¹ì§•: {character_info['personality']}
        ëŒ€í™” ì›ì¹™: ê³µê°ì  ê²½ì²­, ê°ì • íƒìƒ‰, ìœ„ë¡œì™€ ê²©ë ¤, ì‹¤ìš©ì  ì¡°ì–¸
        ì‘ë‹µì€ 2-3ë¬¸ì¥ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ë˜, ê³µê°ì ì´ê³  ë„ì›€ì´ ë˜ë„ë¡ êµ¬ì„±í•˜ì„¸ìš”."""
        
        # ChatGPT API í˜¸ì¶œ
        response = self.client.chat.completions.create(
            model="gpt-3.5-turbo",
            messages=[{"role": "system", "content": system_prompt}] + recent_messages,
            max_tokens=300,
            temperature=0.7
        )
```

### 2. ì‹¤ì‹œê°„ ì›¹ í¬ë¡¤ë§ ì‹œìŠ¤í…œ (BeautifulSoup4)
```python
# app/chatbot.py - ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ë¡¤ë§
def _search_naver_blog(self, query):
    import requests
    from bs4 import BeautifulSoup
    import urllib.parse
    
    # ê²€ìƒ‰ URL êµ¬ì„± ë° User-Agent ì„¤ì •
    search_url = f"https://search.naver.com/search.naver?where=blog&query={urllib.parse.quote(query)}"
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
    }
    
    # ì›¹ í˜ì´ì§€ ìš”ì²­ ë° HTML íŒŒì‹±
    response = requests.get(search_url, headers=headers, timeout=10)
    soup = BeautifulSoup(response.text, 'html.parser')
    
    # ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ì •ë³´ ì¶”ì¶œ
    blog_posts = soup.find_all('li', class_='bx')
    resources = []
    
    for post in blog_posts:
        title_elem = post.find('a', class_='title_link')
        blog_name_elem = post.find('a', class_='sub_time')
        
        if title_elem and blog_name_elem:
            resources.append({
                'title': title_elem.get_text(strip=True),
                'url': title_elem.get('href', ''),
                'blog_name': blog_name_elem.get_text(strip=True),
                'type': 'blog'
            })
    
    return resources[:6]  # ìµœëŒ€ 6ê°œ ê²°ê³¼ ë°˜í™˜
```

### 3. í‚¤ì›Œë“œ ì¶”ì¶œ ë° ë¦¬ì†ŒìŠ¤ ì¶”ì²œ ì—”ì§„
```python
# app/chatbot.py - ëŒ€í™” ê¸°ë°˜ í‚¤ì›Œë“œ ì¶”ì¶œ
def recommend_resources(self, conversation_history, category):
    # ëŒ€í™” ë‚´ìš© ìš”ì•½
    conversation_text = " ".join([
        f"{msg.get('user', '')} {msg.get('bot', '')}" 
        for msg in conversation_history
    ])

    # GPTë¥¼ í™œìš©í•œ í‚¤ì›Œë“œ ì¶”ì¶œ
    keyword_prompt = f"""ë‹¤ìŒ ëŒ€í™” ë‚´ìš©ì—ì„œ í•µì‹¬ í‚¤ì›Œë“œ 3-5ê°œë¥¼ ì¶”ì¶œí•´ì£¼ì„¸ìš”.
    ëŒ€í™” ë‚´ìš©: {conversation_text[:500]}...
    í‚¤ì›Œë“œ:"""

    keyword_response = self.client.chat.completions.create(
        model="gpt-3.5-turbo",
        messages=[{"role": "user", "content": keyword_prompt}],
        max_tokens=100,
        temperature=0.3
    )

    keywords = keyword_response.choices[0].message.content.strip()
    
    # ì¹´í…Œê³ ë¦¬ë³„ ê²€ìƒ‰ ì¿¼ë¦¬ êµ¬ì„±
    category_queries = {
        'customer': ['ê³ ê° ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬', 'ë¯¼ì› ëŒ€ì‘ ë°©ë²•', 'ê³ ê° ì„œë¹„ìŠ¤ ìŠ¤í‚¬'],
        'work': ['ì§ì¥ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ', 'ë™ë£Œ ê´€ê³„ ê°œì„ ', 'ì—…ë¬´ ì••ë°• ê´€ë¦¬'],
        'personal': ['ë²ˆì•„ì›ƒ ì˜ˆë°©', 'ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œë²•', 'ë§ˆìŒ ê±´ê°• ê´€ë¦¬']
    }
    
    # í‚¤ì›Œë“œì™€ ì¹´í…Œê³ ë¦¬ ì¿¼ë¦¬ ì¡°í•©ìœ¼ë¡œ ê²€ìƒ‰
    search_queries = [f"{keyword} {base_query}" for keyword in keywords.split(',')[:3] 
                     for base_query in category_queries.get(category, ['ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬'])[:2]]
```

### 4. AI ì„œë¹„ìŠ¤ ë° ì™¸ë¶€ API ì—°ë™
```python
# app/chatbot.py - AI ì„œë¹„ìŠ¤ ëª¨ë“ˆ
import openai
import requests
from bs4 import BeautifulSoup
import json
import re
from datetime import datetime

class CounselingChatbot:
    def __init__(self, api_key):
        self.client = openai.OpenAI(api_key=api_key)
        self.conversation_history = {}
        
        # ìºë¦­í„°ë³„ í˜ë¥´ì†Œë‚˜ ì •ì˜
        self.character_personas = {
            'í”Œë¡œë¼ë¬´': {
                'role': 'ê³ ê° ê´€ë ¨ ìŠ¤íŠ¸ë ˆìŠ¤ ì „ë¬¸ ìƒë‹´ì‚¬',
                'personality': 'ë¶€ë“œëŸ½ê³  ê³µê°ì ì¸ í†¤ìœ¼ë¡œ ê³ ê°ê³¼ì˜ ê°ˆë“± ìƒí™©ì„ í•´ì†Œí•´ì£¼ëŠ” ìƒë‹´ì‚¬',
                'specialty': 'ê³ ê° ë¯¼ì›, í­ì–¸, ê³¼ë„í•œ ìš”êµ¬ ë“± ì™¸ë¶€ ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©'
            },
            'ì‹¬ì¿µë¹„ë¹„': {
                'role': 'ì¡°ì§Â·ì—…ë¬´ ê´€ë ¨ ìŠ¤íŠ¸ë ˆìŠ¤ ì „ë¬¸ ìƒë‹´ì‚¬',
                'personality': 'í¬ê·¼í•˜ê³  ë”°ëœ»í•œ ë§ˆìŒìœ¼ë¡œ ì§ì¥ ë‚´ ì¸ê°„ê´€ê³„ì™€ ì—…ë¬´ ì••ë°•ì„ ì¡°ìœ¨í•˜ëŠ” ìƒë‹´ì‚¬',
                'specialty': 'ìƒì‚¬Â·ë™ë£Œ ê°ˆë“±, ì—…ë¬´ ì••ë°•, ì¡°ì§ ë¬¸í™” ë“± ë‚´ë¶€ ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©'
            },
            'ë©œë‘ì½œë¦¬': {
                'role': 'ê°œì¸Â·ë²ˆì•„ì›ƒ ì „ë¬¸ ìƒë‹´ì‚¬',
                'personality': 'ì´ˆë¡ë¹› ìœ„ë¡œë¡œ ì§€ì¹œ ëª¸ê³¼ ë§ˆìŒì„ ì¹˜ìœ í•˜ëŠ” íë§ ìƒë‹´ì‚¬',
                'specialty': 'í”¼ë¡œ, ë¬´ê¸°ë ¥, ê°œì¸ì  ë²ˆì•„ì›ƒ ë“± ë‚´ì  ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©'
            }
        }

    # Spring Boot ë°±ì—”ë“œì™€ ì—°ë™ë˜ëŠ” ë©”ì„œë“œë“¤
    def process_message(self, user_id, message, character=None, category=None):
        # GPT API í˜¸ì¶œ ë° ì‘ë‹µ ìƒì„±
        # Spring Bootì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©
        pass

    def recommend_resources(self, conversation_history, category):
        # ë¦¬ì†ŒìŠ¤ ì¶”ì²œ ë¡œì§
        # Spring Bootì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©
        pass
```

### 5. í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœ ê´€ë¦¬ (JavaScript)
```javascript
// app/templates/chat_interface.html - ì‹¤ì‹œê°„ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
function selectCharacter(category, characterName) {
    localStorage.setItem('selectedCategory', category);
    localStorage.setItem('selectedCharacter', characterName);
    window.location.href = '/chat_interface';
}

// Spring Boot ë°±ì—”ë“œì™€ì˜ ì‹¤ì‹œê°„ API í†µì‹ 
async function sendMessage() {
    const message = document.getElementById('messageInput').value;
    const character = localStorage.getItem('selectedCharacter') || 'ë©œë‘ì½œë¦¬';
    const category = localStorage.getItem('selectedCategory') || 'personal';
    
    // ì‚¬ìš©ì ë©”ì‹œì§€ UI ì—…ë°ì´íŠ¸
    addMessageToChat('user', message);
    
    // Spring Boot ë°±ì—”ë“œ API í˜¸ì¶œ
    const response = await fetch('/api/chat', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            user_id: 'user_' + Date.now(),
            message: message,
            character: character,
            category: category
        })
    });
    
    const data = await response.json();
    
    // AI ì‘ë‹µ UI ì—…ë°ì´íŠ¸
    addMessageToChat('bot', data.response);
    
    // ëŒ€í™” íˆìŠ¤í† ë¦¬ ì €ì¥
    conversationHistory.push({
        user: message,
        bot: data.response,
        timestamp: new Date().toISOString()
    });
}

// ë¦¬ì†ŒìŠ¤ ì¶”ì²œ ìš”ì²­
async function requestResources() {
    const response = await fetch('/api/recommend-resources', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            conversation_history: conversationHistory,
            category: localStorage.getItem('selectedCategory') || 'personal'
        })
    });
    
    const data = await response.json();
    displayResources(data.resources);
}
```

### 6. ì˜¤ë¥˜ ì²˜ë¦¬ ë° í´ë°± ì‹œìŠ¤í…œ
```python
# app/chatbot.py - ìŠ¤ë§ˆíŠ¸ í´ë°± ì‘ë‹µ
def _generate_smart_response(self, message, character, user_id):
    # ChatGPT API ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì‘ë‹µ ìƒì„±
    fallback_responses = {
        'í”Œë¡œë¼ë¬´': [
            "ê³ ê°ê³¼ì˜ ê°ˆë“± ìƒí™©ì´ í˜ë“œì…¨ê² ì–´ìš”. ë‹¹ì‹ ì˜ ê°ì •ì„ ì´í•´í•©ë‹ˆë‹¤.",
            "ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ëŠ” ì •ë§ ì–´ë ¤ìš´ ì¼ì´ì£ . ì˜¤ëŠ˜ í•˜ë£¨ë„ ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤."
        ],
        'ì‹¬ì¿µë¹„ë¹„': [
            "ì§ì¥ì—ì„œì˜ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë§ì´ ìŒ“ì´ì…¨ê² ì–´ìš”. ì²œì²œíˆ í•´ê²°í•´ë³´ì•„ìš”.",
            "ë™ë£Œë“¤ê³¼ì˜ ê´€ê³„ê°€ ë³µì¡í•  ë•Œê°€ ìˆì£ . ë‹¹ì‹ ì˜ ì…ì¥ì„ ì´í•´í•©ë‹ˆë‹¤."
        ],
        'ë©œë‘ì½œë¦¬': [
            "ì§€ì¹˜ê³  í˜ë“œì‹  ê²ƒ ê°™ì•„ìš”. ì¶©ë¶„íˆ ì‰¬ì–´ë„ ê´œì°®ì•„ìš”.",
            "ë²ˆì•„ì›ƒì´ ì˜¤ëŠ” ê²ƒ ê°™ë„¤ìš”. ë‹¹ì‹ ì˜ ê°ì •ì„ ì¸ì •í•´ì£¼ì„¸ìš”."
        ]
    }
    
    import random
    responses = fallback_responses.get(character, fallback_responses['ë©œë‘ì½œë¦¬'])
    return {"response": random.choice(responses), "status": "fallback"}
```

## ì˜¤ë¥˜ ì²˜ë¦¬ ë° ì•ˆì •ì„±

### 1. API ì˜¤ë¥˜ ëŒ€ì‘ ì‹œìŠ¤í…œ
```python
# app/chatbot.py - ë‹¤ì¸µ ì˜¤ë¥˜ ì²˜ë¦¬
def process_message(self, user_id, message, character=None, category=None):
    try:
        # 1ì°¨: ChatGPT API í˜¸ì¶œ
        response = self.client.chat.completions.create(
            model="gpt-3.5-turbo",
            messages=[{"role": "system", "content": system_prompt}] + recent_messages,
            max_tokens=300,
            temperature=0.7
        )
        return {"response": response.choices[0].message.content, "status": "success"}
        
    except openai.RateLimitError:
        # 2ì°¨: Rate Limit ì˜¤ë¥˜ ì‹œ ëŒ€ê¸° í›„ ì¬ì‹œë„
        time.sleep(2)
        return self._retry_api_call(system_prompt, recent_messages)
        
    except openai.APIError as e:
        # 3ì°¨: API ì˜¤ë¥˜ ì‹œ ìŠ¤ë§ˆíŠ¸ í´ë°± ì‘ë‹µ
        print(f"OpenAI API ì˜¤ë¥˜: {str(e)}")
        return self._generate_smart_response(message, character, user_id)
        
    except Exception as e:
        # 4ì°¨: ê¸°íƒ€ ì˜ˆì™¸ ìƒí™© ì²˜ë¦¬
        print(f"ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜: {str(e)}")
        return {"response": "ì£„ì†¡í•©ë‹ˆë‹¤. ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "status": "error"}
```

### 2. ì›¹ í¬ë¡¤ë§ ì•ˆì •ì„± ë³´ì¥
```python
# app/chatbot.py - í¬ë¡¤ë§ ì˜¤ë¥˜ ì²˜ë¦¬
def _search_naver_blog(self, query):
    try:
        # 1ì°¨: ì •ìƒì ì¸ í¬ë¡¤ë§ ì‹œë„
        search_url = f"https://search.naver.com/search.naver?where=blog&query={urllib.parse.quote(query)}"
        headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
        }
        
        response = requests.get(search_url, headers=headers, timeout=10)
        response.raise_for_status()
        
        # HTML íŒŒì‹± ë° ë°ì´í„° ì¶”ì¶œ
        soup = BeautifulSoup(response.text, 'html.parser')
        resources = self._extract_blog_data(soup)
        
        if resources:
            return resources
            
    except requests.Timeout:
        # 2ì°¨: íƒ€ì„ì•„ì›ƒ ì‹œ ê¸°ë³¸ ê²€ìƒ‰ ë§í¬ ì œê³µ
        print(f"í¬ë¡¤ë§ íƒ€ì„ì•„ì›ƒ: {query}")
        return [{"url": f"https://search.naver.com/search.naver?where=blog&query={query}", 
                "title": f"'{query}' ê´€ë ¨ ë¸”ë¡œê·¸ ê²€ìƒ‰ ê²°ê³¼", "type": "fallback"}]
                
    except requests.RequestException as e:
        # 3ì°¨: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ ë°˜í™˜
        print(f"í¬ë¡¤ë§ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: {e}")
        return self._get_default_resources(query)
        
    except Exception as e:
        # 4ì°¨: ê¸°íƒ€ í¬ë¡¤ë§ ì˜¤ë¥˜ ì²˜ë¦¬
        print(f"í¬ë¡¤ë§ ì˜ˆì™¸: {e}")
        return []
```

### 3. í”„ë¡ íŠ¸ì—”ë“œ ì˜¤ë¥˜ ì²˜ë¦¬
```javascript
// app/templates/chat_interface.html - í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì˜¤ë¥˜ ì²˜ë¦¬
async function sendMessage() {
    try {
        const message = document.getElementById('messageInput').value;
        
        // ì…ë ¥ ê²€ì¦
        if (!message.trim()) {
            showError('ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }
        
        // ë¡œë”© ìƒíƒœ í‘œì‹œ
        showLoading(true);
        
        // API í˜¸ì¶œ
        const response = await fetch('/chat', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                user_id: 'user_' + Date.now(),
                message: message,
                character: localStorage.getItem('selectedCharacter') || 'ë©œë‘ì½œë¦¬',
                category: localStorage.getItem('selectedCategory') || 'personal'
            })
        });
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        
        const data = await response.json();
        
        if (data.status === 'error') {
            throw new Error(data.response || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
        
        // ì„±ê³µì ì¸ ì‘ë‹µ ì²˜ë¦¬
        addMessageToChat('bot', data.response);
        
    } catch (error) {
        console.error('ë©”ì‹œì§€ ì „ì†¡ ì˜¤ë¥˜:', error);
        showError('ë©”ì‹œì§€ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        
        // í´ë°± ë©”ì‹œì§€ í‘œì‹œ
        addMessageToChat('bot', 'ì£„ì†¡í•©ë‹ˆë‹¤. ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        
    } finally {
        showLoading(false);
    }
}

// ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
function showError(message) {
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.textContent = message;
    document.body.appendChild(errorDiv);
    
    setTimeout(() => {
        errorDiv.remove();
    }, 5000);
}
```

### 4. ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…
```python
# app/chatbot.py - ì‹œìŠ¤í…œ ìƒíƒœ ëª¨ë‹ˆí„°ë§
import logging
from datetime import datetime

class SystemMonitor:
    def __init__(self):
        logging.basicConfig(
            level=logging.INFO,
            format='%(asctime)s - %(levelname)s - %(message)s',
            handlers=[
                logging.FileHandler('kb_hug_ai.log'),
                logging.StreamHandler()
            ]
        )
        self.logger = logging.getLogger(__name__)
    
    def log_api_call(self, endpoint, status, response_time):
        self.logger.info(f"API Call: {endpoint} | Status: {status} | Response Time: {response_time}ms")
    
    def log_error(self, error_type, error_message, user_id=None):
        self.logger.error(f"Error: {error_type} | Message: {error_message} | User: {user_id}")
    
    def log_user_activity(self, user_id, action, category=None):
        self.logger.info(f"User Activity: {user_id} | Action: {action} | Category: {category}")
```

### 5. ì„±ëŠ¥ ìµœì í™” ë° ìºì‹±
```python
# app/chatbot.py - ì‘ë‹µ ìºì‹± ì‹œìŠ¤í…œ
from functools import lru_cache
import hashlib

class ResponseCache:
    def __init__(self):
        self.cache = {}
        self.max_cache_size = 1000
    
    @lru_cache(maxsize=100)
    def get_cached_response(self, message_hash, character):
        """ìì£¼ ì‚¬ìš©ë˜ëŠ” ì‘ë‹µ íŒ¨í„´ ìºì‹±"""
        return self.cache.get(f"{message_hash}_{character}")
    
    def cache_response(self, message_hash, character, response):
        """ì‘ë‹µ ìºì‹±"""
        if len(self.cache) >= self.max_cache_size:
            # LRU ë°©ì‹ìœ¼ë¡œ ì˜¤ë˜ëœ ìºì‹œ ì œê±°
            oldest_key = next(iter(self.cache))
            del self.cache[oldest_key]
        
        self.cache[f"{message_hash}_{character}"] = response
    
    def generate_message_hash(self, message):
        """ë©”ì‹œì§€ í•´ì‹œ ìƒì„±"""
        return hashlib.md5(message.encode()).hexdigest()
```

## ë°ì´í„° êµ¬ì¡°

### ëŒ€í™” íˆìŠ¤í† ë¦¬
```python
conversation_history = [
    {
        "user": "ì‚¬ìš©ì ë©”ì‹œì§€",
        "bot": "AI ì‘ë‹µ",
        "timestamp": "2024-01-01T12:00:00Z"
    }
]
```

### ë¦¬ì†ŒìŠ¤ ì¶”ì²œ ë°ì´í„°
```python
resources = [
    {
        "title": "ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ì œëª©",
        "url": "ì‹¤ì œ ë¸”ë¡œê·¸ URL",
        "description": "í¬ìŠ¤íŠ¸ ë¯¸ë¦¬ë³´ê¸°",
        "blog_name": "ë¸”ë¡œê·¸ëª…",
        "date": "ì‘ì„±ì¼",
        "thumbnail": "ì¸ë„¤ì¼ URL",
        "type": "blog"
    }
]
```